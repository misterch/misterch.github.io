---
title: 跨域
date: 2023-07-29
tags:
 - 跨域
 - 面试
---

## 什么是跨域

主要是出于**浏览器**的同源策略限制，它是浏览器最核心也最基本的安全功能。

当一个请求url的 **协议、域名、端口** 三者之间任意一个与当前页面url不同即为跨域。

跨域限制其实已经接收到服务器的消息，但是浏览器因为安全原因不提供给本域名

发送请求的时候不可能拦截，因为浏览器不确保请求的服务器是否允许跨域

跨域请求默认情况下会被浏览器拦截，例如A网页向B服务器发起请求，除非A请求服务器出具标记说明可以获取B服务器的信息

## 如何解决跨域

### jsonp

基本原理是利用了HTML里script元素标签没有跨域限制 动态创建script标签，将src作为服务器地址，服务器返回一个callback接受返回的参数

### 设置cors跨域资源共享

需要由后端设置

指定可以共享资源的地址

```js
{
  "Access-Control-Allow-Origin": "http://web.xxx.com" //可以指定地址
}
```

任意地址都能够访问

```js
{
  "Access-Control-Allow-Origin": "*" //也可以使用通配符 任何地址都能访问 安全性不高
}
```

### 代理

使用**vite proxy、webpack proxy、node**都能够实现代理

因为只有浏览器才会有跨域限制，可以通过本地开发服务器配置代理（由服务器请求另一个服务器）请求目标地址获得信息，将目标服务器的信息带回来给浏览器

### 反向代理

使用`Nginx`配置反向代理，拦截请求，再将其转发到目标服务器

`proxy_pass`用来设置被代理服务器地址，可以是主机名称，IP地址加端口号

```bash
#当跨域时，nginx拦截/api开头的请求，将其转发到http:localhost:9000;解决跨域问题
location /api {
	proxy_pass	http://localhost:9000;
}
```

