---
title: 异步编程
date: 2023-07-31
---
## 异步编程的优点和难点

### 优点

基于事件驱动的非阻塞I/O模型

### 缺点

无法承担过多的细节性任务

### 难点

异步处理

嵌套过深

阻塞代码

多线程编程

异步转同步

## 异步编程解决方案

### 事件发布/订阅模式

事件监听器模式是一种广泛用用于异步编程的模式，是回调函数的事件化

node提供 `events`模块，`addListener()`，`on()`，`emit()`，`removeListener()`，`removeAllListner()`

这种模式**没有同步和异步调用问题**，emit调用多半伴随事件循环而异步触发

这种模式常用来**解耦业务逻辑**，事件发布者（emit）无需关注订阅者（on）如何实现业务逻辑

利用事件队列**解决雪崩问题**，once解决一些重复性的事件响应，如大量查询数据库

### Promise/Deferred模式

### 流程库控制

## 总结

:::tip

node是为了解决阻塞I/O的性能问题，采用了单线程模型，导致更像是个处理I/O密集型的能手

CPU密集型取决于js线程的能力

:::
